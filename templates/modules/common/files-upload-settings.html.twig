{% set files_handler_service            = 'App\\Services\\FilesHandler' %}
{% set KEY_CURRENT_UPLOAD_TYPE          = constant(files_handler_service~"::KEY_CURRENT_UPLOAD_TYPE") %}
{% set KEY_TARGET_UPLOAD_TYPE           = constant(files_handler_service~"::KEY_TARGET_UPLOAD_TYPE") %}
{% set KEY_CURRENT_SUBDIRECTORY_NAME    = constant(files_handler_service~"::KEY_CURRENT_SUBDIRECTORY_NAME") %}
{% set KEY_TARGET_SUBDIRECTORY_NAME     = constant(files_handler_service~"::KEY_TARGET_SUBDIRECTORY_NAME") %}

{% set file_upload_controller           = 'App\\Controller\\Files\\FileUploadController' %}
{% set KEY_SUBDIRECTORY_CURRENT_PATH_IN_UPLOAD_DIR    = constant(file_upload_controller~"::KEY_SUBDIRECTORY_CURRENT_PATH_IN_UPLOAD_DIR") %}
{% set KEY_SUBDIRECTORY_TARGET_PATH_IN_UPLOAD_DIR     = constant(file_upload_controller~"::KEY_SUBDIRECTORY_TARGET_PATH_IN_UPLOAD_DIR") %}

{% set FIELD_REMOVE_CURRENT_FOLDER      = constant("App\\Form\\Files\\UploadSubdirectoryMoveDataType::FIELD_REMOVE_CURRENT_FOLDER") %}

{% if ajax_render == false %}
    {% set template= "base.html.twig" %}
{% else %}
    {% set template= "blank.html.twig" %}
{% endif %}

    {% extends template %}

{% block body %}
    <!-- ### $App Screen Content ### -->
    <main class='main-content bgc-grey-100'>
        <div id='mainContent'>
            <div class="container-fluid">
                {# DataTable#}

                <div class="row">
                    <div class="col-md-12">

                        {# rename and remove forms #}
                        <div class="row">
                            <div class="bgc-white bd bdrs-3 p-20 mB-20 d-flex flex-column col-6">
                                <h4 class="c-grey-900 mB-20 align-self-center">Rename folder</h4>
                                {{ form_start(rename_form) }}
                                {{ form_end(rename_form) }}
                            </div>


                            <div class="bgc-white bd bdrs-3 p-20 mB-20 d-flex flex-column col-6">
                                <h4 class="c-grey-900 mB-20 align-self-center">Remove folder</h4>
                                {{ form_start(remove_form) }}
                                {{ form_end(remove_form) }}
                            </div>
                        </div>

                        {# moving files between folders form #}
                        <div class="row">
                            <div class="bgc-white bd bdrs-3 p-20 mB-20 d-flex flex-column col-12">
                                <h4 class="c-grey-900 mB-20 align-self-center">Move folder data</h4>
                                {{ form_start(move_data_form) }}

                                <section class="d-flex justify-content-around flex-row">

                                    <div class="copy-from col-4">
                                        <h5>From</h5>
                                        {{ form_widget(move_data_form[KEY_CURRENT_UPLOAD_TYPE]) }}
                                        <br/>
                                        {{ form_widget(move_data_form[KEY_SUBDIRECTORY_CURRENT_PATH_IN_UPLOAD_DIR]) }}
                                    </div>

                                    <div class="copy-to col-4">
                                        <h5>To</h5>
                                        {{ form_widget(move_data_form[KEY_TARGET_UPLOAD_TYPE]) }}
                                        <br/>
                                        {{ form_widget(move_data_form[KEY_SUBDIRECTORY_TARGET_PATH_IN_UPLOAD_DIR]) }}
                                    </div>

                                </section>

                                <br/>

                                <section class="d-flex justify-content-center flex-column align-items-center">
                                    {# TODO - add big description to this because if for some reason js is off the there will be no notification... #}
                                    {# Rethink - not sure if I want this here at all... this is way to risky... i#}
                                    {# TODO: maybe show it only if all files from all SUBDIRECTORIES has been moved? #}
                                    {{ form_widget(move_data_form[FIELD_REMOVE_CURRENT_FOLDER]) }}
                                    {{ form_widget(move_data_form['submit']) }}
                                </section>

                                {{ form_end(move_data_form) }}
                            </div>
                        </div>

                        {# creating subdirectory form #}
                        <div class="row">
                            <div class="bgc-white bd bdrs-3 p-20 mB-20 d-flex flex-column col-6">
                                <h4 class="c-grey-900 mB-20 align-self-center">Create subdirectory for upload type</h4>
                                {{ form_start(create_subdir_form) }}
                                {{ form_end(create_subdir_form) }}
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </main>

{% endblock body %}
